{
  "author": {
    "name": "Alex Robson",
    "email": "alex@sharplearningcurve.com",
    "url": "http://sharplearningcurve.com"
  },
  "name": "anvil.js",
  "description": "an extensible build system",
  "version": "0.9.2",
  "repository": {
    "type": "git",
    "url": "git://github.com/appendto/anvil.js.git"
  },
  "engines": {
    "node": "~0.8.3"
  },
  "preferGlobal": true,
  "dependencies": {
    "colors": "0.6.0",
    "commander": "~1.1",
    "fs-watch-tree": "0.2.2",
    "machina": "~0.2.0",
    "mkdirp": "0.3.3",
    "postal": "~0.7.0",
    "should": "0.6.3",
    "underscore": "~1.4.3",
    "handlebars": "~1.0",
    "express": "~3.0",
    "socket.io": "~0.9",
    "open": "~0.0.2",
    "minimatch": "~0.2.6",
    "monologue.js": "~0.1.1",
    "monopost": "~0.1.1",
    "win-fork": "~1.0.0"
  },
  "devDependencies": {},
  "optionalDependencies": {},
  "bin": {
    "anvil": "./bin/anvil"
  },
  "main": "./lib/api.js",
  "scripts": {
    "install": "npm link npm --local",
    "postinstall": "node ./init.js",
    "test": "anvil --testem"
  },
  "licenses": [
    {
      "type": "MIT",
      "url": "https://github.com/anviljs/anvil.js/raw/master/LICENSE-MIT"
    },
    {
      "type": "GPL",
      "url": "https://github.com/anviljs/anvil.js/raw/master/LICENSE-GPL"
    }
  ],
  "readme": "# Anvil\n\nAnvil started as a way to build a single javascript module from several source files. Build tools that require a lot of explicit/declarative instructions distract from getting work on the project done.\n\nAnvil has been rewritten as a general build system with an extension-based architecture. It should be easy to add features or change almost any behavior as needed. There's a lot of work going on now that will add new ways to use and extend anvil.\n\n## !Recent Changes!\nChanges to terminology and concepts from the 0.8.* version:\n* Several changes to core as of 0.9.0 RC4 will break older plugins, please be patient as we work to resolve these issues.\n* An extension is anything you install from npm or anything anvil loads from your file system\n* Plugins add features to and extend the build process\n* Commands will allow developers to extend anvil to perform specific tasks that aren't part of a build\n* Tasks will be a way for you to define individual instructions (ala Make) that can take dependencies on one another\n* Scaffolds provide ways to generate structure and files from metadata\n* The event system now uses Jim Cowart's monologue; this only affects extension authors\n* The anvil.http extension has been moved into anvil's core\n* Process hosting (the ability to run external programs) has been added to anvil's core\n\nHuge thanks go to Eli Perelman, Doug Neiner and Brian Edgerton for providing general ideas, specifications and implementations that lead to this new direction!\n\n## What Does It Do?\n\nAll parts of the build process are implemented as extensions (specifically as build plugins). Some extensions ship along with anvil's source so that it can do _something_ out of the box. Most of the interesting features will likely be extensions that you install.\n\nA baseline install can do the following:\n\n* Install, remove, enable or disable extensions\n* Automatically install any extensions your build file defines as dependencies\n* Run local extensions (an extension that's not installed from npm)\n* Continuously and incrementally build the project as files change\n* Create default build files based on installed extensions\n* Combine resource files through a comment-based import syntax\n* Concat resource files in specified order using\n    * JSON or YAML file that lists files to create from other files\n    * individual JSON or YAML files\n* Replace tokens (with customizable syntax) in source with \n    * values from package.json\n    * JSON or YAML key/value files\n* Add file headers to final build output based on output file type\n* Host static resources in an HTTP server\n* Start and manage external processes\n\n## Installation\n\n    npm install anvil.js -g\n\n## By Convention\n\nWithout a build file, anvil will use its default conventions to attempt to build your project.\n\n## The Build File ( minimalist example )\n\n    {\n        \"source\": \"src\",\n        \"spec\": \"spec\"\n        \"output\":  \"build\"\n        \"dependencies\": [ \"anvil.mocha\" ]\n    }\n\n* source is the path where _all_ project source belongs; this can be a flat or complex hierarchy\n* output is a list of paths to copy build output to.\n* spec is the folder where test specifications can be found\n* dependencies is a list of anvil extension names that should be installed before the build can proceed\n\n## Building By Convention\n\nIf you don't specify your own build file, anvil assumes you intend to use a build.json file. If one isn't present, it will use its own conventions to build your project. If that's all you need, great! Chances are you'll want a build.json that's configured for your specific project.\n\n## Writing New Build Files\n\nKeeping up with all the extension defaults can be difficult. To see what's available by default for each extension, you can write a new build file for customization.\n\n    anvil --write {name}\n\nThis command creates a build file in the current directory at {name}.json. It will include all the default settings for all the installed and built-in extensions.\n\n## Combining source files, Import Style\n\nAnvil allows you to combine source files by using a commented command\n\n**Javascript**\n\n    // import(\"dependency.{ext}\");\n\n**Coffeescript**\n\n    ### import \"dependency.{ext}\" ###\n\n**Stylus, LESS, CSS**\n\n    CSS: \t\t\t/* import \"dependency.{ext}\" */ \n    LESS, Stylus:\t// import \"dependency.{ext}\n\nWhen you use anvil to compile your project, it will traverse all the files in your source directory and combine them so that your top level files are what get output. \n\n**Warning** Currently, anvil is not clever enough to detect circular dependencies created via import statements and it will _shatter your world_ if you do this.\n\n## Combining source files, Concatenation Style\n\nAnvil provides you with two ways to drive concatenation: yaml lists or individual yaml files\n\n### List Files\nAnvil allows you to combine source files by listing the order of concatenation in a JSON or YAML format. Note: the paths must all be absolute OR relative to the top level of your source folder.\n\n#### JSON Format\n    {\n        \"./file1.js\": [ \"./file1a.js\", \"./file1b.js\", \"./file1c.js\" ],\n        \"./file2.js\": [ \"./file2a.js\", \"./file2b.js\", \"./file2c.js\" ],\n    }\n\n#### YAML Format\n\n    ./file1.js:\n        - ./file1a.js\n        - ./file1b.js\n        - ./file1c.js\n\n    file2.js:\n        - ./file2a.js\n        - ./file2b.js\n        - ./file2c.js\n\n\nAnvil will create file1.js and file2.js by concatenating the corresponding list of files in the order they appear.\n\n### Individual Files\nThis approach allows you to create a list of files to concatenate to create the final outcome. The name and location of the file will be identical to the original but anvil will strip the .json or .yaml extension off.\n\n#### JSON Format\n    { \"imports\": [ \"./file1a.js\", \"./file1c.js\", \"./file1c.js\" ] }\n\n#### YAML Format\nfile1.js.yaml's contents:\n\n    - ./file1a.js    \n    - ./file1b.js    \n    - ./file1c.js    \n\n\nEach example would produce file1.js and concat each of the three listed files together to create its contents. ***NOTE***: The paths in an individual concat file _must_ be relative to the concat file itself.\n\n## Building With Specific Build Files\n\nTo build with a specific build file\n\n    anvil -b <buildfile>\n\n## Continuous Integration\n\nAnvil will watch your source directory for changes and incrementally rebuild changed files ( and any affected files ).\n\n    anvil --ci\n\nYou can configure a build to always run in this mode by adding the following JSON snippet to your build.json file:\n    \n    \"fileLoader\": {\n        \"continuous\": \"true\"\n    }\n\n## Console log\n\nAnvil uses color-coded messages to let you see what's happening during the build. Here's the color key:\n\n    magenta - debug\n    default - events\n    blue - build steps\n    green - success\n    yellow - warning\n    red - error\n\nBy default anvil will print everything but debug and warning messages unless you provide a --verbose argument or add this to your build.json :\n\n    \"log\": {\n        \"debug\": true\n    }\n\nYou can tell anvil to run in quiet mode (it will still print errors (red) and step completions (green) )\n\n    anvil -q\n\n# Extensions\nAnvil has three primary points for extension:\n* plugins - extensions to the build system\n* commands - utility features that run outside of the build\n* tasks - specialized functions that can be combined to give you explicit control of what anvil does\n* scaffolds - folder structure and source generators\n\nAn extension module can contain one or more of any of the three above types. Installing, uninstalling, enabling and disabling an extension module will affect **all** extensions defined within the module.\n\n## Installation\nAnvil installs extensions from npm to a global location: ~/.anvilextensions/node_modules and keeps a manifest of installed and enabled extensions at: ~/.anvilextensions/extensions.json.\n\nOnce an extension is installed, anvil will load it unless you:\n  * Disable it globally with '''anvil disable {extensionname}''' at the command line\n  * Explicitly include other extensions besides it in the build file\n  * Explicitly exclude it in the build file\n\n### When Extensions Misbehave\nAnvil will attempt to automatically disable a extension that throws an exception that would break the build. This is to try and prevent an installed extension from breaking your build system.\n\n### Installing & Uninstalling\nAnvil provides simple command line arguments to install or uninstall extensions to itself at a global level:\n\n    anvil install {extensionname}\n\nor\n\n    anvil uninstall {extensionname}\n\nYou can also install extensions from a file path using the relative path to the extension directory in place of the extension's name.\n\n### Enabling & Disabling\nAnvil provides command line arguments that allow you to enable or disable extensions at the global level:\n\n    anvil enable {extensionname}\n\nor\n\n    anvil disable {extensionname}\n\nDisabled extensions should never be loaded into a build session.\n\n### Updating Extensions\nAnvil will check npm for updates to all globally installed extensions with one simple command:\n\n    anvil update\n\nThis command will take longer the more extensions you have installed and the more extensions which require updates from npm. Note: anvil automatically does this every time you install a new anvil version from npm.\n\n\n### Including Specific Extensions\nAnvil's build file now supports explicit inclusion only so that only extensions which you specify in the build file will be run as part of the build.\n\n    \"extensions\": {\n        \"include\": [ \"anvil.one\", \"anvil.two\", ... ]\n    }\n\n### Excluding Specified Extensions\nAnvil also supports explicit exclusion so that all extensions except for those you specify in the build file will be run as part of the build.\n\n    \"extension\": {\n        \"exclude\": [ \"anvil.one\", \"anvil.two\", ... ]\n    }\n\n### Installing Extensions Locally For A Project\nYou can now install an extension locally to a project using npm like so:\n\n    npm install {extensionname}\n\nIn order for anvil to know about the extension, you must add the following option to your build file:\n\n    \"extensions\": {\n        \"local\": [ \"myLocallyInstalledPluginName\" ]\n    }\n\nPlease note: if you have already installed a global version of the extension, anvil will always prefer the locally installed extension; if you wish to use a global version of the extension, you must use npm to uninstall the local version. Anvil does not manage locally installed extensions.\n\n# HTTP and process hosting\nAnvil will spin up an http server and processes to assist you with testing and continuous integration if a --host flag is provided at the command line or \"host\": true is added to the build file.\n\n## HTTP Host\n\n### \"port\"\nSpecifies what port the server will listen to. The default is 3080.\n\nExample:\n```javascript\n    \"port\": 3080\n```\n\n### \"paths\"\nA hash where the key is the relative url to map to a specific directory or file. The following example shows the default setting which causes the output directory to get mapped to the top level.\n\nExample:\nThe following configuration would allow anvil to host your source tree from http://localhost:3080/src:\n```javascript            \n    \"paths\": {\n        \"/src\": \"./src\"\n    }\n```\n\n### API\nThe following calls are available from anvil.http and should be used by extensions that want to add static resources, provide middleware or provide a 'compiler' that anvil would use to translate a file format to a browser-friendly format (i.e. CoffeeScript to JavaScript).\n\n#### registerPath( url, filePath )\nRegister static files to serve at a specific relative url.\n\n#### addMiddleware( middleware )\nProvide a function that can change the result of a call returned to the browser. Middleware is a function of the form: function( body, req, res ) where body is the complete body of the request, and req and res are the original request and response objects provided by express.\n\n#### addCompiler( extension, mimeType, compiler )\nProvide a function that can translate from one source format to another. Extension is the extension (including the leading period, '.coffee') of the original requested file that the compiler can process. MimeType is the resulting format ( 'text/javascript' ). Compiler is a function of the form: function( content, done ) where content is the original source and the done argument is a callback of the form function( result, error ).\n\n## Process Hosting\n\nIn hosting mode, if processes have been specified in the build file, anvil will start and manage these processes.\n\n```javascript\n\"processes\": {\n    \"process-alias\": {\n        \"command\": \"\",\n        \"args\": [],\n        \"restart\": true | false,\n        \"ignore\": [ \"\" ],\n        \"watch\": [ \"\" ],\n        \"killSignal\": \"\" | [ \"\" ],\n        \"stdio\": \"inherit\" | \"ignore\"\n    }\n}\n```\n### Kill Signals\nBy default, SIGTERM is the signal sent to the process to stop it. In some cases, you'll need to send a SIGINT or some other signal instead. In very rare cases, you may want to send multiple signals; if this is the case you can provide an array of signals.\n\n### stdio\nA value of \"inherit\" will cause the process to print output to Anvil's console. If this gets too noisy, you can use \"ignore\" to prevent that output from hitting the console.\n\n### With CI\nIn CI mode, the restart flag set to true will cause anvil to restart the process after a build has completed.\n\nThe ignore and watch arrays allow you to specify (using minimatch's glob format) which files should or should cause the process to restart when changes occur.\n\n# Contributors\n\nSpecial thanks to the following individuals who have contributed source code or ideas to help make anvil less buggy and more useful:\n\n * Doug Neiner\n * Eli Perelman\n * Brian Edgerton\n * Jim Cowart\n * Jonathan Creamer\n * Mike Hostetler\n * Elijah Manor\n * Aaron McCall\n * Mike Stenhouse\n * Robert Messerle\n * Derick Bailey\n\n# Legal Bits\n\n\"Anvil.js\"( also referred to as \"Anvil\") is owned by Alex Robson.  All rights not explicitly granted in the MIT or GPL license are reserved. See the included LICENSE-* files for more details.\n\nExtensions to Anvil (plugins, commands, tasks, etc.) are not part of Anvil itself, and are the sole property of their respective maintainers.  While every effort is made to ensure accountability, there is absolutely no guarantee, warrantee, or assertion made as to the quality, fitness for a specific purpose, or lack of malice in any given extension.  Extensions published on the npm registry are not affiliated with or endorsed by myself (Alex Robson) or my employer unless otherwise stated in the repository for the extension.\n\nIf you have a complaint about an extension, and cannot resolve it with the package owner, please express your concerns to anviljs@gmail.com.\n\n### In plain english\n\nThis is mine; not my employer's. They have graciously supported the efforts and made contributions but are in no way responsible or liable for it's suitability or function.\n\nIf you create and publish an extension, it's yours, and you are solely accountable\nfor it.  Not me, not my employer.\n\nIf other people create and publish an extension, it's theirs.  Not mine, not my employer's.\n\nMalicious extensions could be published; consider the author behind the extension and perhaps review the code. There is no vetting process for published extensions.\n\nIf this concerns you, inspect the source before installing or using any extension.",
  "readmeFilename": "README.md",
  "_id": "anvil.js@0.9.2",
  "dist": {
    "shasum": "7e9e7548b72a2e3924aa22d74f018dfce2f7405d"
  },
  "_from": "anvil.js@>=0.9.0",
  "_resolved": "https://registry.npmjs.org/anvil.js/-/anvil.js-0.9.2.tgz"
}
